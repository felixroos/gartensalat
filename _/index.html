<html>
  <head>
    <title>_</title>
    <style>
      body {
        background-color: #222;
        font-family: serif;
        font-size: 1.2em;
        color: #edd;
        text-align: left;
        padding: 20px 8px;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
        padding: 0;
        margin: 0;
      }
      @font-face {
        font-family: "FontWithASyntaxHighlighter";
        src: url("/fonts/FontWithASyntaxHighlighter-Regular.woff2")
          format("woff2");
      }
      pre,
      textarea {
        font-size: 12px;
        font-family: "FontWithASyntaxHighlighter", monospace;
        padding: 8px;
        border: 0;
        outline: none;
        overflow: auto;
        background-color: #44444490;
        width: 100%;
        margin: 0px 0;
        color: white;
        box-sizing: border-box;
      }
      a {
        color: cyan;
        font-size: 1em;
      }
      iframe {
        flex-grow: 1;
        overflow: auto;
        padding: 0px;
        border: 0;
        background-color: white;
      }
    </style>
  </head>
  <body>
    <iframe id="iframe"></iframe>
    <details>
      <summary>edit HTML</summary>
      <textarea id="editor" rows="16" spellcheck="false"></textarea>
    </details>
  </body>
  <script>
    const editor = document.getElementById("editor");
    const iframe = document.getElementById("iframe");
    const html_base64 = (code) => btoa(unescape(encodeURIComponent(code)));
    const base64_html = (base64) => decodeURIComponent(escape(atob(base64)));
    const getCodeFromHash = () => base64_html(window.location.hash.slice(1));

    let render = (code = editor.value) => {
      const base64 = html_base64(code);
      const dataUrl = `data:text/html;charset=utf-8;base64,${base64}`;
      iframe.src = dataUrl;
    };

    const fallbackCode = `<h1>hello</h1>
<p>you can edit the content of this page at the bottom of the page.</p>
<p>why? idk my main idea was to create a html page where the content was entirely inside the URL hash, so the server wouldn't see it.</p>
<p>because, when you visit a website, the hash part of the URL won't get sent to the server..</p>
<p>If it doesn't get sent to the server, the owner of the server won't be able to scrape your content (for example, AI companies)</p>
<p>Also, it's pretty cool that you can morph any page that was created this way and create your own version, without the need to download / change / upload it.</p>`;

    const code = getCodeFromHash() || fallbackCode;
    editor.value = code;
    render();

    editor.addEventListener("input", () => {
      window.location.hash = "#" + html_base64(editor.value);
      // render();
    });

    window.addEventListener("hashchange", function () {
      const urlCode = getCodeFromHash();
      if (urlCode) {
        editor.value = urlCode;
      }
      render();
    });
  </script>
</html>
