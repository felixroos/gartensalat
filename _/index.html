<html>
  <head>
    <title>_</title>
    <style>
      body {
        background-color: #222;
        font-family: serif;
        font-size: 1.2em;
        color: #edd;
        text-align: left;
        padding: 20px 8px;
        display: flex;
        flex-direction: column;
        height: 100%;
        overflow: hidden;
        padding: 0;
        margin: 0;
      }
      @font-face {
        font-family: "FontWithASyntaxHighlighter";
        src: url("/fonts/FontWithASyntaxHighlighter-Regular.woff2")
          format("woff2");
      }
      pre,
      textarea {
        font-size: 12px;
        font-family: "FontWithASyntaxHighlighter", monospace;
        padding: 8px;
        border: 0;
        outline: none;
        overflow: auto;
        background-color: #44444490;
        width: 100%;
        margin: 0px 0;
        color: white;
        box-sizing: border-box;
      }
      a {
        color: cyan;
        font-size: 1em;
      }
      #content {
        flex-grow: 1;
        overflow: auto;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div id="content"></div>
    <details>
      <summary>edit HTML</summary>
      <textarea id="editor" rows="16" spellcheck="false"></textarea>
    </details>
  </body>
  <script>
    const editor = document.getElementById("editor");

    const fallbackCode = `<h1>hello</h1>
<p>you can edit the content of this page at the bottom of the page.</p>
<p>why? idk my main idea was to create a html page where the content was entirely inside the URL hash, so the server wouldn't see it.</p>
<p>because, when you visit a website, the hash part of the URL won't get sent to the server..</p>
<p>If it doesn't get sent to the server, the owner of the server won't be able to scrape your content (for example, AI companies)</p>
<p>Also, it's pretty cool that you can morph any page that was created this way and create your own version, without the need to download / change / upload it.</p>`;

    const getCodeFromHash = () =>
      decodeURIComponent(atob(window.location.hash.slice(1)));
    const code = getCodeFromHash() || fallbackCode;
    const content = document.getElementById("content");
    editor.value = code;
    let update = () => {
      content.innerText = "";
      const temp = document.createElement("div");
      temp.innerHTML = editor.value;
      Array.from(temp.childNodes).forEach((node) => {
        if (node.tagName === "SCRIPT") {
          const script = document.createElement("script");
          if (node.src) {
            script.src = node.src;
          } else {
            script.textContent = node.textContent;
          }
          content.appendChild(script);
        } else {
          content.appendChild(node);
        }
      });
    };
    update();
    editor.addEventListener("input", () => {
      const encoded = encodeURIComponent(editor.value);
      window.location.hash = "#" + btoa(encoded);
      update();
    });
    window.addEventListener("hashchange", function () {
      const urlCode = getCodeFromHash();
      if (urlCode) {
        editor.value = urlCode;
      }
      update();
    });
  </script>
</html>
